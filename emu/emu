#!/bin/sh

SCRIPT=$(basename $0)
VERSION="0.0.1"

# Print the help text.
help ()
{
    echo "\
usage: $SCRIPT [-v] [-h]
           <command> [<args>]
"
}

# Print the version number.
version ()
{
    echo "$SCRIPT version $VERSION"
}

print_emu ()
{
    cat << EOF
                                       /-/-=/-=
                                      //  ZX   \"
                                    / /XZXZX(o)  ---,
                                    / XZXZXZXZX _____\`\\
                                     /ZXZXZXZX
                                      / ;,ZXZ
                                      /  :ZX%\\
                                      /%  : X\\
                                      :/:  %:X:
                                      /%:%   %\\\\
                                       /:%:  %  \\
                                       /  :%  : \\
                                        /  :%  :%\\
                                        /%  %    \\
                                        /%:  %:  %\\
                                        //%    :  %\\
                   %%%%%%%%%%  %% %%   /  /     :   :
              %%%%%%%%       %%  %   %%%%           \\:
            %%%%%%                                 : \\
          %%%%                                    :%:\\
       % %                                       %  \\
      %                                         %% \\
    %                                  %%% %%%%%% \\
  %                                 %%%%%%%% %%%\\
 %                                %%  %%%%%% %\\
 %                         %%%%%%%%%%%%% %%%%\\\\
 %%%%/%%%%%%%%%%%%%%%%%%%%%%% %%%%%%% %%% %%\\
 /       %%%%%%%%%  % %% % %%% % %%%%% %%%\\
                (_____)%%(_____)%%%%%%\\
              ((_____) ((____)
                (___)    (___)
                 (__)     (__)
                  (__)     (__)
                   (__)     (__)
                    (__)     (__)
                     (  )     (  )
                     (  )     (  )
                    (    )   (    )
                  (__    |  (___  |
              ___(  /  \\  \\____ \\  |---
            <(____/      \\_____(>\\_____(>
EOF
}

# Get arguments.
while getopts :hv OPT
do
    case $OPT in
        h)
            help
            exit 0
            ;;
        v)
            version
            exit 0
            ;;
        \?)
            echo "Invalid option: -$OPTARG" >&2
            exit $EXIT_INVALID_ARGS
            ;;
        :)
            echo "Option -$OPTARG requires an argument." >&2
            exit $EXIT_INVALID_ARGS
            ;;
    esac
done

# Get command.
COMMAND="$1"
shift

# Parse commands.
case $COMMAND in
    "" | "help")
        help
        exit 0
        ;;
    "version")
        version
        exit 0
        ;;
    "emu")
	print_emu
	exit 0
	;;
    *)
	# Execute command.
        EXEC=$SCRIPT-$COMMAND
        command -v $EXEC >/dev/null 2>&1 || { no_command_error $COMMAND; }
        $EXEC $@
        exit $?
	;;
esac
