#!/bin/sh

SCRIPT=$(basename $0)
VERSION="0.0.1"

# Print the help text.
help ()
{
    echo "\
usage: $SCRIPT [-v] [-h]
           <command> [<args>]
"
}

# Print the version number.
version ()
{
    echo "$SCRIPT version $VERSION"
}

# Print 'not a command' text and exit.
# @param $1 name of missing command.
no_command_error ()
{
    echo "$SCRIPT: '$1' is not an $SCRIPT command. See '$SCRIPT help'."
    exit 1
}

# Get arguments.
while getopts :hv OPT
do
    case $OPT in
        h)
            help
            exit 0
            ;;
        v)
            version
            exit 0
            ;;
        \?)
            echo "Invalid option: -$OPTARG" >&2
            exit $EXIT_INVALID_ARGS
            ;;
        :)
            echo "Option -$OPTARG requires an argument." >&2
            exit $EXIT_INVALID_ARGS
            ;;
    esac
done

# Get command.
COMMAND="$1"
shift

# Parse commands.
case $COMMAND in
    "" | "help")
        help
        exit 0
        ;;
    "version")
        version
        exit 0
        ;;
    *)
	# Execute command.
        EXEC=$SCRIPT-$COMMAND
        command -v $EXEC >/dev/null 2>&1 || { no_command_error $COMMAND; }
        $EXEC $@
        exit $?
	;;
esac
