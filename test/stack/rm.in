set -ue
test_setup

cd $EMU_TEST_DIR/test-source
emu init

assert_is_not_dir "$EMU_TEST_DIR/test-stack"

emu stack add origin $EMU_TEST_DIR/test-stack

assert_is_file ".emu/stacks/origin"
assert_is_dir "$EMU_TEST_DIR/test-stack"

emu stack rm origin

assert_is_not_file ".emu/stacks/origin"
assert_is_dir "$EMU_TEST_DIR/test-stack"

# Test -R
rm -rvf $EMU_TEST_DIR/test-stack
emu stack add origin $EMU_TEST_DIR/test-stack

assert_is_file ".emu/stacks/origin"
assert_is_dir "$EMU_TEST_DIR/test-stack"

test_teardown
